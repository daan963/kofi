
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Preload images -->
    <link rel="preload" href="imgs/mission.png" as="image">
    <link rel="preload" href="imgs/research.png" as="image">
    <link rel="preload" href="imgs/team.png" as="image">
    <link rel="preload" href="imgs/publications.png" as="image">
    <link rel="preload" href="imgs/tools.png" as="image">
    <link rel="preload" href="imgs/join.png" as="image">
    <link rel="preload" href="imgs/contact.png" as="image">
    <link rel="preload" href="imgs/location.png" as="image">
    <link rel="preload" href="imgs/email.png" as="image">    

    <script src="info.js"></script>
    <script src="team.js"></script>
    <script src="research.js"></script>
    <script src="publications.js"></script>
    <script src="tools.js"></script>
    <script src="faq.js"></script>
    <script src="common.js"></script>
    <link href="styles.css" rel="stylesheet">

    <!-- Set page title from info.js -->
   <script>
        document.title = infoTitle;
    </script>    

    <!-- Initialize common.js -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.head.insertAdjacentHTML('beforeend', commonHead);
            document.getElementById('nav-placeholder').innerHTML = nav;
            document.getElementById('footer-placeholder').innerHTML = footer;
            initCommon();
            cleanupGitHubPagesUrl();
        });
    </script>
</head>
<body class="bg-white min-h-screen flex flex-col">
    <div id="nav-placeholder"></div>
    
    <!-- Main Content Area -->
    <main class="flex-grow pt-24">

        <!-- Home Section -->
        <section id="home" class="min-h-screen bg-white section">
            <div class="max-w-7xl mx-auto px-4 space-y-12">

                <!-- Wrapper div for both elements -->
                <div class="grid md:grid-rows-[auto_auto] md:gap-0">
                    <!-- Main Mission - hidden on mobile -->
                    <div class="text-center hidden md:block mt-8">
                        <img src="imgs/mission.png" alt="Research Header" class="mx-auto w-1/3 inline-block">
                    </div>

                    <!-- Mission text - centered and smaller on mobile -->
                    <div class="text-center mt-8 md:-mt-12">  <!-- Changed from md:-mt-4 to md:-mt-8 -->
                        <!-- <h2 id="missionText" class="text-base md:text-2xl font-bold text-gray-900"></h2>                         -->
                        <h2 id="missionText" class="text-base md:text-2xl font-bold text-black dark:text-white"></h2>
                    </div>
                </div>

                <!-- Research section - less spacing on mobile -->
                <div class="flex flex-col md:flex-row items-center gap-4 md:gap-8">
                    <img src="imgs/research.png" alt="Research" class="md:w-1/3">
                    <div class="md:w-1/2" id="researchFocusText"></div>
                </div>


                <!-- Join Us - larger image on mobile -->
                <div class="text-center">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">
                        <button onclick="showSection('join')" class="text-blue-600 hover:text-blue-800">
                            We have open positions. Join us!
                        </button>
                    </h3>
                    <img src="imgs/join.png" alt="Join Us Header" class="mx-auto w-6/4 md:w-3/4">
                </div>
            </div>
        </section>

        <!-- Research Section -->
        <section id="research" class="min-h-screen bg-white py-12 section hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="page-header-image text-center">
                    <img src="imgs/research.png" alt="Research Header" class="mx-auto w-2/3 md:w-1/3">
                </div>
                
                <!-- Add this container for research goal -->
                <div id="researchGoalText" class="max-w-4xl mx-auto text-lg text-gray-700 mb-12">
                    <!-- Research goal text will be loaded here -->
                </div>
        
                <div id="researchContainer" class="space-y-16">
                    <!-- Research areas loaded here -->
                </div>
            </div>
        </section>

        <!-- Team Section -->
        <section id="team" class="min-h-screen bg-white py-12 section hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="page-header-image text-center">
                    <img src="imgs/team.png" alt="Team Header" class="mx-auto w-4/3 md:w-2/3">
                </div>
                <div id="piSection" class="text-center mb-16 mt-16">
                    <!-- PI info loaded dynamically -->
                </div>
                <div id="teamGrid" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Team members loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Publications Section -->
        <section id="publications" class="min-h-screen bg-white py-12 section hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="page-header-image text-center">
                    <img src="imgs/publications.png" alt="Publications Header" class="mx-auto w-2/3 md:w-1/3">
                </div>
                <div id="publicationsList" class="max-w-4xl mx-auto space-y-8">
                    <!-- Publications loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Tools Section -->
        <section id="tools" class="min-h-screen bg-white py-12 section hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="page-header-image text-center">
                    <img src="imgs/tools.png" alt="Tools Header" class="mx-auto w-2/3 md:w-1/3">
                </div>
                <div id="toolsList" class="max-w-4xl mx-auto space-y-8">
                    <!-- Tools loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Join Section -->
        <section id="join" class="min-h-screen bg-white py-12 section hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="page-header-image text-center">
                    <img src="imgs/join.png" alt="Join Us Header" class="mx-auto w-6/3 md:w-3/4">
                </div>
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-3xl font-bold text-center mb-8">Join Our Lab</h2>
                    <div id="joinText" class="prose max-w-none">
                        <!-- Join content loaded dynamically -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="min-h-screen bg-white py-12 section hidden">
            <div class="max-w-7xl mx-auto px-4">
                <div class="max-w-6xl mx-auto space-y-6">
                    <!-- Location Info -->
                    <div class="flex flex-col md:flex-row items-center gap-4">
                        <img src="imgs/location.png" alt="Contact" class="w-full md:w-1/3 rounded-lg">
                        <div class="w-full md:w-2/5" id="locationText">
                            <!-- Location text loaded dynamically -->
                        </div>
                    </div>

                    <!-- Contact Info -->
                    <div class="flex flex-col md:flex-row-reverse items-center gap-4">
                        <img src="imgs/email.png" alt="Contact" class="w-full md:w-1/3 rounded-lg">
                        <div class="w-full md:w-2/5 md:pl-12" id="emailText">
                            <!-- Email text loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div id="footer-placeholder"></div>

    <script>
        // Previous JavaScript remains the same
        
        // Add new function for showing PI page
        function showPIPage() {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show PI page
            document.getElementById('pi-page').classList.remove('hidden');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Rest of the JavaScript remains the same
    </script>

    <!-- Main JavaScript -->
    <script>
        // Navigation functionality
        function showSection(sectionId) {
            // Clear URL hash
            history.pushState("", document.title, window.location.pathname);
                    
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected section and highlight its nav button
            const selectedSection = document.getElementById(sectionId);
            if (selectedSection) {
                selectedSection.classList.remove('hidden');
                
                // Highlight the corresponding nav button
                document.querySelectorAll(`button[onclick="showSection('${sectionId}')"]`).forEach(button => {
                    button.classList.add('active');
                });
                
                // Load section-specific content

                // If it's the home section, set the texts
                if (sectionId === 'home') {
                    document.getElementById('missionText').textContent = infoResearchMission;
                    document.getElementById('researchFocusText').innerHTML = infoResearchFocus;
                }

                if (sectionId === 'publications') {
                    const publicationsList = document.getElementById('publicationsList');
                    publicationsList.innerHTML = '';
                    loadPublications();
                }
                if (sectionId === 'team') {
                    const teamGrid = document.getElementById('teamGrid');
                    teamGrid.innerHTML = '';
                    loadTeamMembers();
                }
                if (sectionId === 'tools') {
                    loadTools();
                }
                if (sectionId === 'research') {
                    loadResearch();
                }
                if (sectionId === 'join') {
                    loadJoinUs();
                }
                if (sectionId === 'contact') {
                    loadContact();
                }
                if (sectionId === 'phd-faq') {
                    loadFAQ();
                }
                if (sectionId === 'pi-page') {
                    loadPIPage();
                }
            }
            
            // Close mobile menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
            
            // Scroll to top
            window.scrollTo(0, 0);
            }

        // Content Loading Functions
        function loadPublications() {
            const publicationsList = document.getElementById('publicationsList');
            publications.forEach(pub => {
                const pubElement = document.createElement('div');
                pubElement.className = 'mb-8';
                
                let html = '';
                html += `<div class="text-lg">${pub.pdf ? 
                    `<a href="${pub.pdf}" target="_blank" class="text-blue-600 hover:text-blue-800">${pub.title}</a>` : 
                    pub.title}</div>`;
                
                html += `<div class="mt-2">${pub.authors}</div>`;
                if (pub.authorNote) {
                    html += `<div class="mt-1 text-gray-600 italic">${pub.authorNote}</div>`;
                }
                
                html += `<div class="mt-1">
                    <i>${pub.journal}</i>, ${pub.year}
                    ${pub.code ? `<a href="${pub.code}" target="_blank" class="text-blue-600 hover:text-blue-800 ml-4">[code]</a>` : ''}
                    ${pub.data ? `<a href="${pub.data}" target="_blank" class="text-blue-600 hover:text-blue-800 ml-2">[data]</a>` : ''}
                </div>`;
                
                pubElement.innerHTML = html;
                publicationsList.appendChild(pubElement);
            });
        }

        function loadTeamMembers() {
            // Load PI
            const piSection = document.getElementById('piSection');
            const pi = teamMembers.pi;
            piSection.innerHTML = `
                <img src="${pi.image}" alt="${pi.name}" 
                    onclick="window.location.href='payam.html'" 
                    class="w-48 h-48 rounded-full mx-auto mb-4 object-cover hover:opacity-90 cursor-pointer">
                <h3 class="text-xl font-semibold mb-2">
                    <a href="payam.html" class="text-blue-600 hover:text-blue-800">
                        ${pi.name}
                    </a>
                </h3>
                <p class="text-gray-600">${pi.position}</p>
            `;

            
            // Load other members
            const teamGrid = document.getElementById('teamGrid');
            teamGrid.innerHTML = '';
            
            teamMembers.members.forEach(member => {
                const memberDiv = document.createElement('div');
                memberDiv.className = 'text-center';
                
                let html = `
                    <img src="${member.image}" alt="${member.name}" 
                        class="w-48 h-48 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">`;
                
                if (member.webpage) {
                    html += `<a href="${member.webpage}" target="_blank" 
                            class="text-blue-600 hover:text-blue-800">${member.name}</a>`;
                } else {
                    html += member.name;
                }
                
                html += `</h3>
                    <p class="text-gray-600">${member.position}</p>`;
                
                memberDiv.innerHTML = html;
                teamGrid.appendChild(memberDiv);
            });
        }

        function loadTools() {
            const toolsList = document.getElementById('toolsList');
            toolsList.innerHTML = '';
            
            tools.forEach(tool => {
                const toolElement = document.createElement('div');
                toolElement.className = 'mb-8';
                
                let html = `<div class="text-lg">
                    <a href="${tool.link}" target="_blank" class="text-blue-600 hover:text-blue-800">${tool.title}</a>
                </div>`;
                
                html += `<div class="mt-2 text-gray-700">
                    ${tool.note}
                    ${tool.manual ? `<a href="${tool.manual}" target="_blank" class="text-blue-600 hover:text-blue-800 ml-2">[manual]</a>` : ''}
                </div>`;
                
                if (tool.publication) {
                    const pub = tool.publication;
                    html += `
                        <div class="mt-4 pl-4 border-l-2 border-gray-200">
                            <div><a href="${pub.pdf}" target="_blank" class="text-blue-600 hover:text-blue-800">${pub.title}</a></div>
                            <div class="mt-1 text-gray-600">${pub.authors}</div>
                            <div class="mt-1">
                                <i>${pub.journal}</i>, ${pub.year}
                                ${pub.code ? `<a href="${pub.code}" target="_blank" class="text-blue-600 hover:text-blue-800 ml-4">[code]</a>` : ''}
                                ${pub.data ? `<a href="${pub.data}" target="_blank" class="text-blue-600 hover:text-blue-800 ml-2">[data]</a>` : ''}
                            </div>
                        </div>
                    `;
                }
                
                toolElement.innerHTML = html;
                toolsList.appendChild(toolElement);
            });
        }

        function loadResearch() {
            // Load research goal
            document.getElementById('researchGoalText').innerHTML = researchGoal;

            const container = document.getElementById('researchContainer');
            container.innerHTML = '';
            
            researchAreas.forEach((area, index) => {
                const areaDiv = document.createElement('div');
                const isEven = index % 2 === 0;
                
                areaDiv.innerHTML = `
                    <div class="flex flex-col ${isEven ? 'md:flex-row' : 'md:flex-row-reverse'} items-center gap-8">
                        <img src="${area.figure}" alt="Research Area ${index + 1}" class="md:w-1/3">
                        <div class="md:w-1/2">
                            <p class="text-lg text-gray-700 mb-6">${area.text}</p>
                            
                            <div class="space-y-4">
                                <h3 class="text-lg font-semibold">Related Publications:</h3>
                                ${area.publications.map(pub => `
                                    <div class="mb-2">
                                        <a href="${pub.pdf}" target="_blank" class="text-blue-600 hover:text-blue-800">
                                            ${pub.title}
                                        </a>
                                        <div class="text-sm text-gray-600">
                                            ${pub.authors}<br>
                                            <i>${pub.journal}</i>, ${pub.year}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(areaDiv);
            });
        }

        function loadJoinUs() {
            document.getElementById('joinText').innerHTML = textJoinUs;
        }

        function loadContact() {
            document.getElementById('locationText').textContent = textLocation;
            document.getElementById('emailText').textContent = textEmail;
        }

        function loadFAQ() {
            const faqContainer = document.getElementById('faqContainer');
            faqContainer.innerHTML = '';
            
            faqContent.forEach(faq => {
                const faqDiv = document.createElement('div');
                faqDiv.className = 'mb-8';
                faqDiv.innerHTML = `
                    <p class="font-semibold mb-2">${faq.question}</p>
                    <p class="text-gray-600">${faq.answer}</p>
                `;
                faqContainer.appendChild(faqDiv);
            });
        }

        function loadPIPage() {
            const pi = teamMembers.pi;
            document.querySelector('#piPageImage').src = pi.image;
            document.querySelector('#piPageImage').alt = pi.name;
            document.querySelector('#piPageName').textContent = pi.name;
            document.querySelector('#piPagePosition').textContent = pi.position;
            document.querySelector('#piBio').innerHTML = pi.bio.split('\n\n').map(para => 
                `<p class="mb-4">${para.trim()}</p>`
            ).join('');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            document.head.insertAdjacentHTML('beforeend', commonHead);
            document.getElementById('nav-placeholder').innerHTML = nav;
            document.getElementById('footer-placeholder').innerHTML = footer;
            
            // Now the nav is in place, initialize common elements
            initCommon();
            cleanupGitHubPagesUrl();

            // Set home page content
            document.getElementById('missionText').textContent = infoResearchMission;
            document.getElementById('researchFocusText').innerHTML = infoResearchFocus;
            
            // Check if there's a hash in the URL and show appropriate section
            const hash = window.location.hash.substring(1); // Remove the # symbol
            if (hash) {
                showSection(hash);
            } else {
                showSection('home');
            }
        });
    </script>
</body>
</html>
